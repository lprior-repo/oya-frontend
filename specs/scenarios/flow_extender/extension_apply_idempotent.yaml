scenario:
  id: ext-apply-idempotent
  spec_ref: flow-wasm-v1
  spec_version: 1.0.0
  category: extension-behavior
  visibility: open
  priority: high
  description: Applying the same extension set repeatedly is idempotent.
  rationale: Repeated apply actions should not introduce divergent outcomes.
setup:
  universe: local
  initial_state: extension-selection-ready
  preconditions:
    - description: Extension selection payload can be re-applied.
      check:
        type: static
        selection_reusable: true
steps:
  - id: verify-apply-idempotence
    description: Re-run apply path using the same extension inputs.
    action:
      type: noop
    assertions:
      - type: status
        expected: 0
        message: Idempotent apply check executes without runner errors.
    extractions: []
teardown:
  reset_universe: true
  custom_cleanup: []
