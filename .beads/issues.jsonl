{"id":"bd-17v","title":"ci-gate: restore clippy-compliant build in graph modules","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260220074859-peslrkrm.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260220074859-peslrkrm.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260220074859-peslrkrm\"\n  title: \"ci-gate: restore clippy-compliant build in graph modules\"\n  type: \"bug\"\n  priority: 0\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL keep :clippy and :ci green on every commit.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN moon run :clippy is executed\\\", shall: \\\"THE SYSTEM SHALL exit with code 0 and no denied lint violations.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF graph module lint violations exist\\\", shall_not: \\\"THE SYSTEM SHALL NOT pass CI gating\\\", because: \\\"it permits regressions and prevents predictable release flow.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Repository is in a compilable state under moon tasks.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"moon run :clippy exits 0.\\\",\n        \\\"moon run :ci --force exits 0 without lint failures.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No #[allow] suppression added for the reported clippy denies.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/graph/layout.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/graph/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"What refactor split preserves layout determinism while satisfying line-count lint?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Inspect exact clippy diagnostics and hotspots.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add or adjust regression assertions for fit_view behavior if needed.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Refactor apply into helper functions and move constants to module scope.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260220074859-peslrkrm/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/graph/layout.rs:23\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/mod.rs:422\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/mod.rs:423\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"tests/graph_regressions.rs\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":0,"issue_type":"bug","created_at":"2026-02-20T13:48:59.810360775Z","created_by":"lewis","updated_at":"2026-02-20T13:48:59.810360775Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-184","title":"engine: Async IO Bridge","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-0c1bci7j.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-0c1bci7j.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219105843-0c1bci7j\"\n  title: \"engine: Async IO Bridge\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL execute network requests asynchronously.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN an HTTP node executes\\\", shall: \\\"THE SYSTEM SHALL hit the configured URL.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF a request fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash\\\", because: \\\"errors are captured\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow::step is synchronous\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Workflow::step is asynchronous\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Network state is tracked\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219105843-0c1bci7j/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T16:58:43.754504876Z","created_by":"lewis","updated_at":"2026-02-19T17:10:01.586572604Z","closed_at":"2026-02-19T17:10:01.586563284Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-18z","title":"ui: Global Node Search and CMD+K interface","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-xalysero.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-xalysero.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219080116-xalysero\"\n  title: \"ui: Global Node Search and CMD+K interface\"\n  type: \"feature\"\n  priority: 3\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL provide fuzzy search for 400+ potential node types.\\\",\n      \\\"THE SYSTEM SHALL allow adding nodes via keyboard search.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN CMD+K is pressed\\\", shall: \\\"THE SYSTEM SHALL open the global search modal.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF no results found\\\", shall_not: \\\"THE SYSTEM SHALL NOT show a blank screen\\\", because: \\\"a 'Request Node' link should be shown\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Node library metadata loaded\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Selected node dropped at mouse position\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Search index is always available\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219080116-xalysero/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-19T14:01:17.265823263Z","created_by":"lewis","updated_at":"2026-02-19T19:17:25.852843041Z","closed_at":"2026-02-19T19:17:25.852837441Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1bv","title":"flow-extender: Add idempotent apply semantics with extension fingerprints","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-mxl3j7li.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-mxl3j7li.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-mxl3j7li\"\n  title: \"flow-extender: Add idempotent apply semantics with extension fingerprints\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete flow-extender: Add idempotent apply semantics with extension fingerprints with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"flow-extender: Add idempotent apply semantics with extension fingerprints has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/graph/execution.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-004.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify flow-extender: Add idempotent apply semantics with extension fingerprints behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-mxl3j7li/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/execution.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:01.953913785Z","created_by":"lewis","updated_at":"2026-02-21T21:26:01.953913785Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1cu","title":"engine: Robustness (Cycles & Timeouts)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219114321-ql99gohc.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219114321-ql99gohc.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219114321-ql99gohc\"\n  title: \"engine: Robustness (Cycles & Timeouts)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL detect cyclic dependencies during preparation.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN execution exceeds 30 seconds\\\", shall: \\\"THE SYSTEM SHALL terminate the run and report a timeout.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF a node execution fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash the engine\\\", because: \\\"errors should be isolated to the node\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow exists\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Execution either completes or times out safely\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"The engine must remain deterministic\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add error field to Node struct\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Update prepare_run with DFS cycle detection\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219114321-ql99gohc/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T17:43:21.211323965Z","created_by":"lewis","updated_at":"2026-02-19T17:47:03.432170973Z","closed_at":"2026-02-19T17:47:03.432158123Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1dd","title":"flow-extender: Define extension rule registry and typed contracts","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-kqzzk1me.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-kqzzk1me.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-kqzzk1me\"\n  title: \"flow-extender: Define extension rule registry and typed contracts\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete flow-extender: Define extension rule registry and typed contracts with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"flow-extender: Define extension rule registry and typed contracts has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/graph/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-001.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify flow-extender: Define extension rule registry and typed contracts behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-kqzzk1me/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/mod.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:01.865503954Z","created_by":"lewis","updated_at":"2026-02-21T21:26:01.865503954Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1ea","title":"queue:ready label","status":"tombstone","priority":2,"issue_type":"task","created_at":"2026-02-20T04:01:29.174403660Z","created_by":"lewis","updated_at":"2026-02-20T04:01:34.469063510Z","source_repo":".","deleted_at":"2026-02-20T04:01:34.469058230Z","deleted_by":"lewis","delete_reason":"delete","original_type":"task","compaction_level":0,"original_size":0,"labels":["queue:blocked","queue:deferred","queue:in-progress","queue:ready"]}
{"id":"bd-1ew","title":"shell: Version control, snapshots, and JSON portability","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-lz2ml0gh.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-lz2ml0gh.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219080116-lz2ml0gh\"\n  title: \"shell: Version control, snapshots, and JSON portability\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL allow exporting workflows as a JSON file.\\\",\n      \\\"THE SYSTEM SHALL maintain a history of the last 10 versions locally.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN 'Import' is clicked\\\", shall: \\\"THE SYSTEM SHALL validate the JSON schema before applying state.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF importing malformed JSON\\\", shall_not: \\\"THE SYSTEM SHALL NOT overwrite the current workflow\\\", because: \\\"data loss must be avoided\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"LocalStorage digital twin available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"JSON schema is compliant\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Version IDs are unique\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219080116-lz2ml0gh/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-19T14:01:17.357182325Z","created_by":"lewis","updated_at":"2026-02-19T14:01:17.357182325Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1jc","title":"core: node graph data structures","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219075335-cup48ef3.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219075335-cup48ef3.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219075335-cup48ef3\"\n  title: \"core: node graph data structures\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL define a Workflow as a collection of Nodes and Connections.\\\",\n      \\\"THE SYSTEM SHALL ensure Node IDs are unique.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN an edge is added\\\", shall: \\\"THE SYSTEM SHALL verify both nodes exist.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF a node is deleted\\\", shall_not: \\\"THE SYSTEM SHALL NOT leave dangling connections\\\", because: \\\"it breaks graph integrity\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"None\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Graph state is valid\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No dangling edges\\\",\n      \\\"Unique IDs\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Implement Workflow, Node, and Edge structs\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Add pure logic for node/edge mutations\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219075335-cup48ef3/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T13:53:35.775805140Z","created_by":"lewis","updated_at":"2026-02-19T19:17:25.851695520Z","closed_at":"2026-02-19T19:17:25.851681550Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1kr","title":"docs: Author flow-extender architecture and operator guide","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-7aracnlh.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-7aracnlh.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-7aracnlh\"\n  title: \"docs: Author flow-extender architecture and operator guide\"\n  type: \"task\"\n  priority: 3\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete docs: Author flow-extender architecture and operator guide with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"docs: Author flow-extender architecture and operator guide has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"README.md\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"docs/03_WORKFLOW.md\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-020.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify docs: Author flow-extender architecture and operator guide behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-7aracnlh/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"README.md\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"docs/03_WORKFLOW.md\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-21T21:26:02.501470262Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.501470262Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1m5","title":"gate: Scenario Runner Integration","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-ztzkolqy.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-ztzkolqy.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219105843-ztzkolqy\"\n  title: \"gate: Scenario Runner Integration\"\n  type: \"task\"\n  priority: 4\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL run behavioral tests against the UI.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a scenario is run\\\", shall: \\\"THE SYSTEM SHALL execute the defined actions.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF a test fails\\\", shall_not: \\\"THE SYSTEM SHALL NOT report success\\\", because: \\\"integrity\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Scenario runner is initialized\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Test results are reported\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Test state is clean\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219105843-ztzkolqy/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":4,"issue_type":"task","created_at":"2026-02-19T16:58:43.955198570Z","created_by":"lewis","updated_at":"2026-02-19T17:10:01.587393627Z","closed_at":"2026-02-19T17:10:01.587387567Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1mh","title":"ui: Property Editor","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-ikk19pdr.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-ikk19pdr.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219105843-ikk19pdr\"\n  title: \"ui: Property Editor\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL show structured inputs for node config.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a node is selected\\\", shall: \\\"THE SYSTEM SHALL display its configuration fields.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF config is invalid\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash the UI\\\", because: \\\"robustness\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Node is selected\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Config fields are visible\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Data binding is consistent\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219105843-ikk19pdr/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T16:58:43.802802429Z","created_by":"lewis","updated_at":"2026-02-19T17:10:01.586821092Z","closed_at":"2026-02-19T17:10:01.586813952Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1nu","title":"quality: Add scenario-runner cases for extension behaviors","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-wwuyzpfj.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-wwuyzpfj.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-wwuyzpfj\"\n  title: \"quality: Add scenario-runner cases for extension behaviors\"\n  type: \"task\"\n  priority: 2\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete quality: Add scenario-runner cases for extension behaviors with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"quality: Add scenario-runner cases for extension behaviors has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/scenario_runner/runner.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/scenario_runner/types.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"specs/flow-wasm-v1.yaml\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-014.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify quality: Add scenario-runner cases for extension behaviors behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-wwuyzpfj/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/scenario_runner/runner.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/scenario_runner/types.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"specs/flow-wasm-v1.yaml\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"task","created_at":"2026-02-21T21:26:02.302942945Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.302942945Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1qt","title":"quality: Add flow_extender contract tests for each rule","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-989zqtfm.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-989zqtfm.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-989zqtfm\"\n  title: \"quality: Add flow_extender contract tests for each rule\"\n  type: \"task\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete quality: Add flow_extender contract tests for each rule with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"quality: Add flow_extender contract tests for each rule has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"tests/graph_regressions.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-013.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify quality: Add flow_extender contract tests for each rule behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-989zqtfm/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"tests/graph_regressions.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"task","created_at":"2026-02-21T21:26:02.233434244Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.233434244Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1r2","title":"telemetry: Track suggestion acceptance and rejection metrics","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-wfckozoz.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-wfckozoz.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-wfckozoz\"\n  title: \"telemetry: Track suggestion acceptance and rejection metrics\"\n  type: \"chore\"\n  priority: 3\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete telemetry: Track suggestion acceptance and rejection metrics with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"telemetry: Track suggestion acceptance and rejection metrics has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/metrics/model.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/metrics/store.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-019.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify telemetry: Track suggestion acceptance and rejection metrics behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-wfckozoz/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/metrics/model.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/metrics/store.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":3,"issue_type":"chore","created_at":"2026-02-21T21:26:02.469126991Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.469126991Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1r3","title":"restate-mapping: Enforce ctx.run / timeout / compensation recommendation bundle","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-pbreabet.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-pbreabet.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-pbreabet\"\n  title: \"restate-mapping: Enforce ctx.run / timeout / compensation recommendation bundle\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete restate-mapping: Enforce ctx.run / timeout / compensation recommendation bundle with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"restate-mapping: Enforce ctx.run / timeout / compensation recommendation bundle has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"docs/10_RESTATE_SDK.md\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-016.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify restate-mapping: Enforce ctx.run / timeout / compensation recommendation bundle behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-pbreabet/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"docs/10_RESTATE_SDK.md\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:02.370014397Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.370014397Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1tt","title":"ui: Add one-click apply and multi-select apply actions","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-n5vzk9h5.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-n5vzk9h5.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-n5vzk9h5\"\n  title: \"ui: Add one-click apply and multi-select apply actions\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete ui: Add one-click apply and multi-select apply actions with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"ui: Add one-click apply and multi-select apply actions has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/ui/selected_node_panel.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/hooks/use_workflow_state.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-010.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify ui: Add one-click apply and multi-select apply actions behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-n5vzk9h5/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/ui/selected_node_panel.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/hooks/use_workflow_state.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:02.136304591Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.136304591Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1x5","title":"flow-extender: Add dry-run graph patch preview model","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-omlzgqkm.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-omlzgqkm.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-omlzgqkm\"\n  title: \"flow-extender: Add dry-run graph patch preview model\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete flow-extender: Add dry-run graph patch preview model with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"flow-extender: Add dry-run graph patch preview model has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/graph/connectivity.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-003.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify flow-extender: Add dry-run graph patch preview model behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-omlzgqkm/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/connectivity.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:01.923149777Z","created_by":"lewis","updated_at":"2026-02-21T21:26:01.923149777Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-1x9","title":"ui: Add extension history timeline and undo integration","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-oh9fl1id.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-oh9fl1id.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-oh9fl1id\"\n  title: \"ui: Add extension history timeline and undo integration\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete ui: Add extension history timeline and undo integration with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"ui: Add extension history timeline and undo integration has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/ui/config_panel/execution.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/hooks/use_workflow_state.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-012.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify ui: Add extension history timeline and undo integration behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-oh9fl1id/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/ui/config_panel/execution.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/hooks/use_workflow_state.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-21T21:26:02.199522170Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.199522170Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-237","title":"data-panel: Add NDV-lite input/output inspector for extension nodes","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-ptnyucna.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-ptnyucna.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-ptnyucna\"\n  title: \"data-panel: Add NDV-lite input/output inspector for extension nodes\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"4hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete data-panel: Add NDV-lite input/output inspector for extension nodes with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"data-panel: Add NDV-lite input/output inspector for extension nodes has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/ui/config_panel/execution.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/graph/execution.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-017.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify data-panel: Add NDV-lite input/output inspector for extension nodes behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-ptnyucna/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/ui/config_panel/execution.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/execution.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-21T21:26:02.400945434Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.400945434Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-25v","title":"graph: Branching & Named Ports","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-y66lqfqy.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-y66lqfqy.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219105843-y66lqfqy\"\n  title: \"graph: Branching & Named Ports\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL support named ports on connections.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN an If node is encountered\\\", shall: \\\"THE SYSTEM SHALL branch execution based on condition.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF a port is missing\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash\\\", because: \\\"robustness\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow struct exists\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Connection has port fields\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Ports are non-empty strings\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/graph/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"How to represent ports in JSON?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Update models\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Update step logic\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219105843-y66lqfqy/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T16:58:43.704912165Z","created_by":"lewis","updated_at":"2026-02-19T17:10:01.586219727Z","closed_at":"2026-02-19T17:10:01.586204387Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2gq","title":"fmt-gate: enforce rustfmt-clean graph module state","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260220074859-fmfql6y3.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260220074859-fmfql6y3.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260220074859-fmfql6y3\"\n  title: \"fmt-gate: enforce rustfmt-clean graph module state\"\n  type: \"bug\"\n  priority: 0\n  effort_estimate: \"30min\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL keep source files rustfmt-clean before merge.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN moon run :fmt is executed\\\", shall: \\\"THE SYSTEM SHALL return exit code 0 with no file diffs.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF committed code diverges from rustfmt output\\\", shall_not: \\\"THE SYSTEM SHALL NOT pass formatting gate\\\", because: \\\"non-deterministic formatting slows review and hides meaningful diffs.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Formatter configuration is present and loadable.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"moon run :fmt exits 0.\\\",\n        \\\"No unstaged formatting-only changes remain after check.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Formatting gate behavior remains consistent across Linux developer environments.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/graph/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"moon.yml\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Can formatting-sensitive patterns be rewritten for readability without semantic change?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Capture exact rustfmt diff regions.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add regression check step in developer workflow docs if absent.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Apply formatting and optionally simplify wrapped expressions.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260220074859-fmfql6y3/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/graph/mod.rs:133\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/mod.rs:402\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"tests/graph_regressions.rs\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":0,"issue_type":"bug","created_at":"2026-02-20T13:48:59.894823071Z","created_by":"lewis","updated_at":"2026-02-20T13:48:59.894823071Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2tf","title":"canvas: Multi-select & Lasso","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219114427-36ltzkqp.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219114427-36ltzkqp.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219114427-36ltzkqp\"\n  title: \"canvas: Multi-select & Lasso\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL allow users to select multiple nodes using a selection box.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN multiple nodes are selected\\\", shall: \\\"THE SYSTEM SHALL move all of them when one is dragged.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF selection box is empty\\\", shall_not: \\\"THE SYSTEM SHALL NOT change selection\\\", because: \\\"it prevents accidental deselects\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Canvas is visible\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Multiple nodes can be moved at once\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Selection state must be consistent\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Implement selection_box signal\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Update NodeCard selection logic\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219114427-36ltzkqp/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T17:44:27.628146210Z","created_by":"lewis","updated_at":"2026-02-19T17:47:03.432474121Z","closed_at":"2026-02-19T17:47:03.432465831Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2v8","title":"flow-extender: Build compound plan generator from multiple suggestions","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-6rq5dqmt.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-6rq5dqmt.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-6rq5dqmt\"\n  title: \"flow-extender: Build compound plan generator from multiple suggestions\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete flow-extender: Build compound plan generator from multiple suggestions with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"flow-extender: Build compound plan generator from multiple suggestions has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/scenario_runner/types.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-007.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify flow-extender: Build compound plan generator from multiple suggestions behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-6rq5dqmt/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/scenario_runner/types.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:02.045061394Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.045061394Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-2x0","title":"shell: localstorage persistence","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219070624-sovoxsnm.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219070624-sovoxsnm.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219070624-sovoxsnm\"\n  title: \"shell: localstorage persistence\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL serialize tasks to JSON for storage.\\\",\n      \\\"THE SYSTEM SHALL use the key \"dioxus-tasks\" for storage.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN the app loads\\\", shall: \\\"THE SYSTEM SHALL attempt to restore state from LocalStorage.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF LocalStorage is full\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash\\\", because: \\\"persistence failures should be handled gracefully\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Window/LocalStorage available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Data persisted to \"dioxus-tasks\" key\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Data remains consistent between sessions\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219070624-sovoxsnm/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T13:06:24.644726362Z","created_by":"lewis","updated_at":"2026-02-19T19:17:25.852514893Z","closed_at":"2026-02-19T19:17:25.852508903Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-306","title":"core: multi-project task organization","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219073540-znhyftdp.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219073540-znhyftdp.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219073540-znhyftdp\"\n  title: \"core: multi-project task organization\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL support multiple Projects with unique names.\\\",\n      \\\"THE SYSTEM SHALL track the active Project for the UI.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a project is deleted\\\", shall: \\\"THE SYSTEM SHALL remove all associated tasks.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF no projects exist\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash\\\", because: \\\"a default \"Inbox\" project should be created\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"None (pure)\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Returned collection contains the new project\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Project names are unique\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Update Task model for project association\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement ProjectCollection logic\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219073540-znhyftdp/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-19T13:35:40.341356884Z","created_by":"lewis","updated_at":"2026-02-19T13:35:40.341356884Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-30w","title":"engine: Execution History & Logs","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219114551-er4obyoi.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219114551-er4obyoi.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219114551-er4obyoi\"\n  title: \"engine: Execution History & Logs\"\n  type: \"feature\"\n  priority: 3\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL store the results of the last 10 execution runs.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN an execution completes\\\", shall: \\\"THE SYSTEM SHALL append a new RunRecord to the history.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF history exceeds 10 records\\\", shall_not: \\\"THE SYSTEM SHALL NOT grow indefinitely\\\", because: \\\"it would bloat LocalStorage\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Execution engine is functional\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"History is visible in the sidebar\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Each history record has a unique ID\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add RunRecord model to graph/mod.rs\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Update run() to record results\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219114551-er4obyoi/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-19T17:45:51.387825831Z","created_by":"lewis","updated_at":"2026-02-19T17:47:03.432694319Z","closed_at":"2026-02-19T17:47:03.432687469Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-35j","title":"ui: dashboard and task components","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219070624-tabqh9hv.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219070624-tabqh9hv.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219070624-tabqh9hv\"\n  title: \"ui: dashboard and task components\"\n  type: \"feature\"\n  priority: 3\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL use a responsive layout with a progress indicator.\\\",\n      \\\"THE SYSTEM SHALL follow accessibility standards for task controls.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a task is completed\\\", shall: \\\"THE SYSTEM SHALL update the global progress bar.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF on mobile\\\", shall_not: \\\"THE SYSTEM SHALL NOT hide essential task controls\\\", because: \\\"UX must be consistent\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Core logic implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"UI reflects current state of tasks\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No state mutation inside render functions\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219070624-tabqh9hv/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-02-19T13:06:24.687900286Z","created_by":"lewis","updated_at":"2026-02-19T13:06:24.687900286Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-388","title":"engine: Rich Expression Resolver","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219114929-wk1oc1eg.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219114929-wk1oc1eg.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219114929-wk1oc1eg\"\n  title: \"engine: Rich Expression Resolver\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL evaluate arithmetic expressions in node configurations.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN an expression contains string methods\\\", shall: \\\"THE SYSTEM SHALL transform the string accordingly.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF an expression is malformed\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash the resolver\\\", because: \\\"it should return the raw expression string\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Basic path resolution exists\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Expressions can compute values from multiple node outputs\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"The resolver must remain side-effect free\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Create ExpressionParser calculation module\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement math and string method handlers\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219114929-wk1oc1eg/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T17:49:29.229627605Z","created_by":"lewis","updated_at":"2026-02-19T17:54:04.663439802Z","closed_at":"2026-02-19T17:54:04.663419872Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-39w","title":"ui: SVG-based canvas and node rendering","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219075335-komc7q4d.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219075335-komc7q4d.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219075335-komc7q4d\"\n  title: \"ui: SVG-based canvas and node rendering\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL render nodes as SVG groups with labels.\\\",\n      \\\"THE SYSTEM SHALL render connections as Bezier curves.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a node is dragged\\\", shall: \\\"THE SYSTEM SHALL update its position in state.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF outside canvas bounds\\\", shall_not: \\\"THE SYSTEM SHALL NOT hide the node completely\\\", because: \\\"users need to pan back\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Graph model exists\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"UI reflects graph state\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"SVG coordinates match state positions\\\",\n      \\\"Consistent scaling\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219075335-komc7q4d/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-19T13:53:35.856147825Z","created_by":"lewis","updated_at":"2026-02-19T13:53:35.856147825Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3a5","title":"restate-mapping: Align extensions to Restate service/object/workflow semantics","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-a9ww83m0.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-a9ww83m0.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-a9ww83m0\"\n  title: \"restate-mapping: Align extensions to Restate service/object/workflow semantics\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete restate-mapping: Align extensions to Restate service/object/workflow semantics with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"restate-mapping: Align extensions to Restate service/object/workflow semantics has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"docs/10_RESTATE_SDK.md\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/ui/sidebar/model.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-015.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify restate-mapping: Align extensions to Restate service/object/workflow semantics behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-a9ww83m0/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"docs/10_RESTATE_SDK.md\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/ui/sidebar/model.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:02.335756014Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.335756014Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3cq","title":"sync: LocalStorage Sync","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-qhaewazo.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-qhaewazo.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219105843-qhaewazo\"\n  title: \"sync: LocalStorage Sync\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL persist workflow to browser storage.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN the workflow state changes\\\", shall: \\\"THE SYSTEM SHALL save to storage after a debounce.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF storage is full\\\", shall_not: \\\"THE SYSTEM SHALL NOT lose in-memory state\\\", because: \\\"it fallback to memory\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"LocalStorage is available\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"State is saved periodically\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Saved JSON is valid\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219105843-qhaewazo/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T16:58:43.853989176Z","created_by":"lewis","updated_at":"2026-02-19T17:10:01.587028260Z","closed_at":"2026-02-19T17:10:01.587021620Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3e2","title":"node: Function Node Implementation","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219114929-zvww08m5.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219114929-zvww08m5.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219114929-zvww08m5\"\n  title: \"node: Function Node Implementation\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL provide a Function node type.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a Function node executes\\\", shall: \\\"THE SYSTEM SHALL produce a new JSON object based on the defined mapping.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF the function output is invalid JSON\\\", shall_not: \\\"THE SYSTEM SHALL NOT pass it to downstream nodes\\\", because: \\\"it would break downstream nodes\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Node model supports dynamic types\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Function node output matches the evaluated template\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Function node must not access browser globals\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add Function variant to execute_node_type\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement template evaluation logic\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219114929-zvww08m5/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T17:49:29.276843611Z","created_by":"lewis","updated_at":"2026-02-19T17:54:04.663764799Z","closed_at":"2026-02-19T17:54:04.663755389Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3g5","title":"ui: sidebar navigation and fluid animations","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219073540-dgl92iff.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219073540-dgl92iff.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219073540-dgl92iff\"\n  title: \"ui: sidebar navigation and fluid animations\"\n  type: \"feature\"\n  priority: 3\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL use CSS transitions for smooth task completion and deletion.\\\",\n      \\\"THE SYSTEM SHALL display a project-specific progress indicator.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a project is selected\\\", shall: \\\"THE SYSTEM SHALL update the task list view with a fade-in effect.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF sidebar is empty\\\", shall_not: \\\"THE SYSTEM SHALL NOT hide project creation controls\\\", because: \\\"users must be able to add the first project\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Multi-project logic implemented\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"UI correctly reflects the selected project state\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No state mutation inside render functions\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219073540-dgl92iff/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":3,"issue_type":"feature","created_at":"2026-02-19T13:35:40.389104246Z","created_by":"lewis","updated_at":"2026-02-19T13:35:40.389104246Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-3gv","title":"[test] E2E Playwright tests timeout due to Chromium version compatibility","description":"## Context\nThe Playwright E2E UI tests (`tests/ui_test.rs`) are implemented and logically correct. However, they consistently time out in the current environment because the Chromium version required by the `playwright-rust` driver (v878941) fails to load/execute the modern Dioxus 0.7 WASM bundle.\n\n## Requirements (EARS)\n- While the app is served via `dx serve`, the E2E tests shall be able to interact with the UI.\n- If the browser fails to load the WASM bundle, then the tests shall provide descriptive failure logs.\n\n## Acceptance Criteria\n1. `cargo test --test ui_test` passes consistently.\n2. Screenshots of the running application are successfully captured.","status":"open","priority":3,"issue_type":"task","created_at":"2026-02-19T19:16:54.185073234Z","created_by":"lewis","updated_at":"2026-02-19T19:16:54.185073234Z","source_repo":".","compaction_level":0,"original_size":0,"labels":["gate:test","severity:minor","smell:test"]}
{"id":"bd-7z8","title":"templates: Add extension presets library (webhook, approval, retry saga)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-s5txqqnb.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-s5txqqnb.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-s5txqqnb\"\n  title: \"templates: Add extension presets library (webhook, approval, retry saga)\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete templates: Add extension presets library (webhook, approval, retry saga) with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"templates: Add extension presets library (webhook, approval, retry saga) has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/ui/sidebar/model.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-018.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify templates: Add extension presets library (webhook, approval, retry saga) behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-s5txqqnb/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/ui/sidebar/model.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-21T21:26:02.434511980Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.434511980Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-85p","title":"flow-extender: Add extension dependency graph and ordering","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-5znamkay.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-5znamkay.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-5znamkay\"\n  title: \"flow-extender: Add extension dependency graph and ordering\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete flow-extender: Add extension dependency graph and ordering with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"flow-extender: Add extension dependency graph and ordering has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/graph/layout.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-006.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify flow-extender: Add extension dependency graph and ordering behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-5znamkay/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/layout.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:02.014672454Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.014672454Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-9lh","title":"core: task model and pure logic","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219070624-e2akt0jt.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219070624-e2akt0jt.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219070624-e2akt0jt\"\n  title: \"core: task model and pure logic\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL define a Task with ID, content, and completion state.\\\",\n      \\\"THE SYSTEM SHALL ensure Task IDs are unique within a collection.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a task is toggled\\\", shall: \\\"THE SYSTEM SHALL return a new task state with flipped completion.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF task content is empty\\\", shall_not: \\\"THE SYSTEM SHALL NOT allow task creation\\\", because: \\\"empty tasks clutter the UI\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"None (pure)\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Returned state is valid Task\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Task IDs are unique\\\",\n      \\\"Task content is non-empty\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write unit tests for task transitions\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement Task struct and pure functions\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219070624-e2akt0jt/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-19T13:06:24.602332032Z","created_by":"lewis","updated_at":"2026-02-19T13:06:24.602332032Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-a2w","title":"ui: Add Extend Flow panel in selected node sidebar","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-3bq72tkg.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-3bq72tkg.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-3bq72tkg\"\n  title: \"ui: Add Extend Flow panel in selected node sidebar\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete ui: Add Extend Flow panel in selected node sidebar with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"ui: Add Extend Flow panel in selected node sidebar has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/ui/selected_node_panel.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/ui/config_panel/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-009.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify ui: Add Extend Flow panel in selected node sidebar behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-3bq72tkg/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/ui/selected_node_panel.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/ui/config_panel/mod.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:02.106760558Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.106760558Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-b6f","title":"flow-extender: Add rollback snapshot support for extension batches","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-jxt18zrg.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-jxt18zrg.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-jxt18zrg\"\n  title: \"flow-extender: Add rollback snapshot support for extension batches\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete flow-extender: Add rollback snapshot support for extension batches with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"flow-extender: Add rollback snapshot support for extension batches has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/hooks/use_workflow_state.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-008.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify flow-extender: Add rollback snapshot support for extension batches behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-jxt18zrg/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/hooks/use_workflow_state.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-21T21:26:02.076683128Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.076683128Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-i0r","title":"ui: Add preview overlay for proposed nodes and edges","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-qd6ejznt.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-qd6ejznt.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-qd6ejznt\"\n  title: \"ui: Add preview overlay for proposed nodes and edges\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"4hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete ui: Add preview overlay for proposed nodes and edges with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"ui: Add preview overlay for proposed nodes and edges has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/ui/node.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/ui/edges.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/main.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-011.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify ui: Add preview overlay for proposed nodes and edges behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-qd6ejznt/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/ui/node.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/ui/edges.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/main.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:02.168586523Z","created_by":"lewis","updated_at":"2026-02-21T21:26:02.168586523Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-jw3","title":"ui: Node configuration sidebar with dynamic expressions","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-uencc6ft.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-uencc6ft.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219080116-uencc6ft\"\n  title: \"ui: Node configuration sidebar with dynamic expressions\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"4hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL show a settings panel when a node is double-clicked.\\\",\n      \\\"THE SYSTEM SHALL support dynamic data mapping using expressions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a parameter is changed\\\", shall: \\\"THE SYSTEM SHALL update the node state and trigger a re-validation.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF the expression is invalid\\\", shall_not: \\\"THE SYSTEM SHALL NOT crash the UI\\\", because: \\\"users need to see the error to fix it\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Node selected\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Node config matches input schema\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Panel is always visible on the right\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219080116-uencc6ft/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T14:01:17.087235869Z","created_by":"lewis","updated_at":"2026-02-19T19:17:25.852334945Z","closed_at":"2026-02-19T19:17:25.852326495Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-om5","title":"flow-extender: Add confidence scoring and rationale classifier","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-di3jigrs.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-di3jigrs.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-di3jigrs\"\n  title: \"flow-extender: Add confidence scoring and rationale classifier\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete flow-extender: Add confidence scoring and rationale classifier with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"flow-extender: Add confidence scoring and rationale classifier has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/ui/config_panel/execution.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-002.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify flow-extender: Add confidence scoring and rationale classifier behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-di3jigrs/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/ui/config_panel/execution.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":2,"issue_type":"feature","created_at":"2026-02-21T21:26:01.892520319Z","created_by":"lewis","updated_at":"2026-02-21T21:26:01.892520319Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-pzw","title":"ui: Connection Snapping","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-4qjbfuix.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219105843-4qjbfuix.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219105843-4qjbfuix\"\n  title: \"ui: Connection Snapping\"\n  type: \"feature\"\n  priority: 3\n  effort_estimate: \"1hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL draw a phantom wire during dragging.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN dragging from a pin\\\", shall: \\\"THE SYSTEM SHALL show a phantom line to the cursor.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF dragging to invalid pin\\\", shall_not: \\\"THE SYSTEM SHALL NOT snap\\\", because: \\\"clarity\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Pin is clicked\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Phantom wire is visible\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Coordinate transformation is accurate\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219105843-4qjbfuix/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":3,"issue_type":"feature","created_at":"2026-02-19T16:58:43.902291708Z","created_by":"lewis","updated_at":"2026-02-19T17:10:01.587218358Z","closed_at":"2026-02-19T17:10:01.587212338Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-u3a","title":"engine: Step-by-step execution and wire-data inspection","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-sergwlss.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-sergwlss.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219080116-sergwlss\"\n  title: \"engine: Step-by-step execution and wire-data inspection\"\n  type: \"feature\"\n  priority: 2\n  effort_estimate: \"4hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL display the data payload on top of wires after execution.\\\",\n      \\\"THE SYSTEM SHALL support 'Test Step' for individual node isolation.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN a node fails\\\", shall: \\\"THE SYSTEM SHALL highlight the node in red and stop the execution branch.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF a large payload is on a wire\\\", shall_not: \\\"THE SYSTEM SHALL NOT clutter the canvas\\\", because: \\\"it should be collapsible\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow graph is valid\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Execution results stored per node\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Real-time status matches engine state\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Write failing tests\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement to make tests pass\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219080116-sergwlss/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":2,"issue_type":"feature","created_at":"2026-02-19T14:01:17.177651536Z","created_by":"lewis","updated_at":"2026-02-19T19:17:25.852681392Z","closed_at":"2026-02-19T19:17:25.852675842Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-wki","title":"flow-extender: Introduce extension conflict detection","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-pegfzo8k.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260221152601-pegfzo8k.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260221152601-pegfzo8k\"\n  title: \"flow-extender: Introduce extension conflict detection\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL preserve DAG safety and avoid invalid connections when generating extensions.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN user requests flow extension from current workflow state\\\", shall: \\\"THE SYSTEM SHALL complete flow-extender: Introduce extension conflict detection with deterministic outputs and actionable diagnostics.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF extension planning detects uncertainty or conflict\\\", shall_not: \\\"THE SYSTEM SHALL NOT silently mutate workflow topology\\\", because: \\\"Silent mutation breaks trust and makes debugging impossible.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow JSON is parseable and internally consistent.\\\",\n        \\\"Node identifiers remain unique before mutation.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"All generated changes are represented as explicit node/edge operations.\\\",\n        \\\"flow-extender: Introduce extension conflict detection has deterministic behavior for same input workflow and options.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"No self-connections are introduced.\\\",\n      \\\"Existing user-authored nodes and edges are never deleted implicitly.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/flow_extender/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/errors.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Where should extension metadata live for persistence and undo safety?\\\", answered: false},\n      {question: \\\"How should this task surface diagnostics to users and tests?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read and annotate target files for task-005.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"},\n        {task: \\\"Map existing abstractions to new contracts before writing code.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add failing tests that specify flow-extender: Introduce extension conflict detection behavior.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"},\n        {task: \\\"Add failure-path tests for conflicts and malformed inputs.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement minimal production code to satisfy tests.\\\", done_when: \\\"Tests pass\\\"},\n        {task: \\\"Wire feature into existing hooks/UI/state plumbing as required.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260221152601-pegfzo8k/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/flow_extender/mod.rs\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/errors.rs\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"Use given/when/then tests already in repository as style reference.\\\",\n      \\\"Follow existing workflow mutation and undo stack conventions.\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":1,"issue_type":"feature","created_at":"2026-02-21T21:26:01.984024276Z","created_by":"lewis","updated_at":"2026-02-21T21:26:01.984024276Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-wmk","title":"runtime-engine: fail run when cyclic graph leaves nodes unexecuted","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260220074859-uemcmy1x.cue implementation.cue\n# Schema location: /home/lewis/src/oya-frontend/.beads/schemas/oya-frontend-20260220074859-uemcmy1x.cue\n\n\n#EnhancedBead: {\n  id: \"oya-frontend-20260220074859-uemcmy1x\"\n  title: \"runtime-engine: fail run when cyclic graph leaves nodes unexecuted\"\n  type: \"bug\"\n  priority: 0\n  effort_estimate: \"2hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL report run success only when all non-skipped nodes execute to completion.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN prepare_run cannot schedule all nodes due to cycle or unresolved dependencies\\\", shall: \\\"THE SYSTEM SHALL mark run as failed with actionable error metadata.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF execution_queue excludes nodes that remain pending\\\", shall_not: \\\"THE SYSTEM SHALL NOT record run.success as true\\\", because: \\\"it creates false-positive telemetry and hides runtime defects.\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Workflow may contain cycles because add_connection does not reject cyclic edges.\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"run history success=false when pending, unexecuted nodes remain.\\\",\n        \\\"At least one node or run-level error explains unschedulable graph state.\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Every node is either completed, failed, or explicitly skipped before success=true.\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      {path: \\\"src/graph/mod.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"src/graph/layout.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"},\n      {path: \\\"tests/graph_regressions.rs\\\", what_to_extract: \\\"Existing patterns\\\", document_in: \\\"research_notes.md\\\"}\n    ]\n    research_questions: [\n      {question: \\\"Should cycle detection live in add_connection, prepare_run, or both for defense in depth?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Trace lifecycle of node status from prepare_run through run completion.\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Add regression tests for cyclic workflows and partial scheduling.\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Implement explicit unschedulable-node detection and error propagation.\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/oya-frontend-20260220074859-uemcmy1x/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      {path: \\\"src/graph/mod.rs:452\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/mod.rs:673\\\", relevance: \\\"Related implementation\\\"},\n      {path: \\\"src/graph/layout.rs:56\\\", relevance: \\\"Related implementation\\\"}\n    ]\n    similar_implementations: [\n      \\\"tests/graph_regressions.rs:258\\\"\n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"open","priority":0,"issue_type":"bug","created_at":"2026-02-20T13:48:59.973016520Z","created_by":"lewis","updated_at":"2026-02-20T13:48:59.973016520Z","source_repo":".","compaction_level":0,"original_size":0}
{"id":"bd-wqb","title":"canvas: Advanced interactions (Pan, Zoom, Minimap, Lasso)","description":"# CUE Validation Schema\n# Validate implementation: cue vet /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-eoh5kfki.cue implementation.cue\n# Schema location: /home/lewis/src/new-app/.beads/schemas/new-app-20260219080116-eoh5kfki.cue\n\n\n#EnhancedBead: {\n  id: \"new-app-20260219080116-eoh5kfki\"\n  title: \"canvas: Advanced interactions (Pan, Zoom, Minimap, Lasso)\"\n  type: \"feature\"\n  priority: 1\n  effort_estimate: \"4hr\"\n  labels: [\"planner-generated\"]\n\n  clarifications: {\n    clarification_status: \"RESOLVED\"\n  }\n\n  ears_requirements: {\n    ubiquitous: [\n      \\\"THE SYSTEM SHALL support panning the canvas via middle-click or space+drag.\\\",\n      \\\"THE SYSTEM SHALL provide a minimap showing the entire graph overview.\\\"\n    ]\n    event_driven: [\n      {trigger: \\\"WHEN the zoom level changes\\\", shall: \\\"THE SYSTEM SHALL scale the SVG viewport around the mouse cursor.\\\"}\n    ]\n    unwanted: [\n      {condition: \\\"IF nodes are outside the current view\\\", shall_not: \\\"THE SYSTEM SHALL NOT remove them from the DOM\\\", because: \\\"it breaks state and accessibility\\\"}\n    ]\n  }\n\n  contracts: {\n    preconditions: {\n      auth_required: false\n      required_inputs: []\n      system_state: [\n        \\\"Canvas element exists\\\"\n      ]\n    }\n    postconditions: {\n      state_changes: [\n        \\\"Transform matrix is correctly updated\\\"\n      ]\n      return_guarantees: []\n    }\n    invariants: [\n      \\\"Minimum zoom 0.1x, Maximum zoom 5x\\\"\n    ]\n  }\n\n  research_requirements: {\n    files_to_read: [\n      \n    ]\n    research_questions: [\n      {question: \\\"What existing patterns should be followed?\\\", answered: false}\n    ]\n    research_complete_when: [\n      \"All files have been read and patterns documented\"\n    ]\n  }\n\n  inversions: {\n    usability_failures: [\n      {failure: \"User encounters unclear error\", prevention: \"Provide specific error messages\", test_for_it: \"test_error_messages_are_clear\"}\n    ]\n  }\n\n  acceptance_tests: {\n    happy_paths: [\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"},\n      {name: \\\"test_happy_path\\\", given: \\\"Valid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is 0\\\", \\\"Output is correct\\\"], real_input: \\\"command input\\\", expected_output: \\\"expected output\\\"}\n    ]\n    error_paths: [\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"},\n      {name: \\\"test_error_path\\\", given: \\\"Invalid inputs\\\", when: \\\"User executes command\\\", then: [\\\"Exit code is non-zero\\\", \\\"Error message is clear\\\"], real_input: \\\"invalid input\\\", expected_output: null, expected_error: \\\"error message\\\"}\n    ]\n  }\n\n  e2e_tests: {\n    pipeline_test: {\n      name: \"test_full_pipeline\"\n      description: \"End-to-end test of full workflow\"\n      setup: {}\n      execute: {\n        command: \"intent command\"\n      }\n      verify: {\n        exit_code: 0\n      }\n    }\n  }\n\n  verification_checkpoints: {\n    gate_0_research: {\n      name: \"Research Gate\"\n      must_pass_before: \"Writing code\"\n      checks: [\"All research questions answered\"]\n      evidence_required: [\"Research notes documented\"]\n    }\n    gate_1_tests: {\n      name: \"Test Gate\"\n      must_pass_before: \"Implementation\"\n      checks: [\"All tests written and failing\"]\n      evidence_required: [\"Test files exist\"]\n    }\n    gate_2_implementation: {\n      name: \"Implementation Gate\"\n      must_pass_before: \"Completion\"\n      checks: [\"All tests pass\"]\n      evidence_required: [\"CI green\"]\n    }\n    gate_3_integration: {\n      name: \"Integration Gate\"\n      must_pass_before: \"Closing bead\"\n      checks: [\"E2E tests pass\"]\n      evidence_required: [\"Manual verification complete\"]\n    }\n  }\n\n  implementation_tasks: {\n    phase_0_research: {\n      parallelizable: true\n      tasks: [\n        {task: \\\"Read relevant files and understand existing patterns\\\", done_when: \\\"Documented\\\", parallel_group: \\\"research\\\"}\n      ]\n    }\n    phase_1_tests_first: {\n      parallelizable: true\n      gate_required: \"gate_0_research\"\n      tasks: [\n        {task: \\\"Implement Viewport matrix state\\\", done_when: \\\"Test exists and fails\\\", parallel_group: \\\"tests\\\"}\n      ]\n    }\n    phase_2_implementation: {\n      parallelizable: false\n      gate_required: \"gate_1_tests\"\n      tasks: [\n        {task: \\\"Add MouseWheel zoom and Drag pan handlers\\\", done_when: \\\"Tests pass\\\"}\n      ]\n    }\n    phase_4_verification: {\n      parallelizable: true\n      gate_required: \"gate_2_implementation\"\n      tasks: [\n        {task: \"Run moon run :ci\", done_when: \"CI passes\", parallel_group: \"verification\"}\n      ]\n    }\n  }\n\n  failure_modes: {\n    failure_modes: [\n      {symptom: \"Feature does not work\", likely_cause: \"Implementation incomplete\", where_to_look: [{file: \"src/main.rs\", what_to_check: \"Implementation logic\"}], fix_pattern: \"Complete implementation\"}\n    ]\n  }\n\n  anti_hallucination: {\n    read_before_write: [\n      {file: \"src/main.rs\", must_read_first: true, key_sections_to_understand: [\"Main entry point\"]}\n    ]\n    apis_that_exist: []\n    no_placeholder_values: [\"Use real data from codebase\"]\n    git_verification: {\n      before_claiming_done: \"git status && git diff && moon run :test\"\n    }\n  }\n\n  context_survival: {\n    progress_file: {\n      path: \".bead-progress/new-app-20260219080116-eoh5kfki/progress.txt\"\n      format: \"Markdown checklist\"\n    }\n    recovery_instructions: \"Read progress.txt and continue from current task\"\n  }\n\n  completion_checklist: {\n    tests: [\n      \"[ ] All acceptance tests written and passing\",\n      \"[ ] All error path tests written and passing\",\n      \"[ ] E2E pipeline test passing with real data\",\n      \"[ ] No mocks or fake data in any test\"\n    ]\n    code: [\n      \"[ ] Implementation uses Result<T, Error> throughout\",\n      \"[ ] Zero unwrap or expect calls\"\n    ]\n    ci: [\n      \"[ ] moon run :ci passes\"\n    ]\n  }\n\n  context: {\n    related_files: [\n      \n    ]\n    similar_implementations: [\n      \n    ]\n  }\n\n  ai_hints: {\n    do: [\n      \"Use functional patterns: map, and_then, ?\",\n      \"Return Result<T, Error> from all fallible functions\",\n      \"READ files before modifying them\"\n    ]\n    do_not: [\n      \"Do NOT use unwrap or expect\",\n      \"Do NOT use panic!, todo!, or unimplemented!\",\n      \"Do NOT modify clippy configuration\"\n    ]\n    constitution: [\n      \"Zero unwrap law: NEVER use .unwrap or .expect\",\n      \"Test first: Tests MUST exist before implementation\"\n    ]\n  }\n}\n","status":"closed","priority":1,"issue_type":"feature","created_at":"2026-02-19T14:01:16.998146176Z","created_by":"lewis","updated_at":"2026-02-19T19:17:25.852107027Z","closed_at":"2026-02-19T19:17:25.852096797Z","close_reason":"done","source_repo":".","compaction_level":0,"original_size":0}
